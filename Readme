Если я правильно понял задание:
(но не до конца осознал, в каком конкретно формате нужно было делать если не в таком, как ниже)
/start (сохраняем пользователя, а при повторном нажатии обновляется время последнего нажатия команды)
/bot_send телеграмм (отправляем сообщение всем)
/bot_send @bortnikovstiv телеграмм (отправляем сообщение выбранному)
/user_send http://example.com телеграмм (сохраняем url и отправляем на адресс письмо)
/user_send телеграмм (если нет url, то просто сохраняем в БД)



Прошу сильно не ругать за подобие кода)